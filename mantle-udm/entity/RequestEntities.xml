<?xml version="1.0" encoding="UTF-8"?>
<!--
This software is in the public domain under CC0 1.0 Universal plus a Grant of Patent License.

To the extent possible under law, the author(s) have dedicated all
copyright and related and neighboring rights to this software to the
public domain worldwide. This software is distributed without any
warranty.

You should have received a copy of the CC0 Public Domain Dedication
along with this software (see the LICENSE.md file). If not, see
<http://creativecommons.org/publicdomain/zero/1.0/>.
-->
<entities xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/entity-definition-1.5.xsd">
    <!-- ========================================================= -->
    <!--  - mantle.request -->
    <!--  - mantle.request.requirement -->
    <!-- ========================================================= -->


    <!-- ========================================================= -->
    <!-- mantle.request -->
    <!-- ========================================================= -->

    <entity entity-name="Request" package-name="mantle.request">
        <field name="requestId" type="id" is-pk="true"/>
        <field name="requestTypeEnumId" type="id"/>
        <field name="requestCategoryId" type="id"/>
        <field name="statusId" type="id" enable-audit-log="true"/>
        <field name="requestName" type="text-medium"/>
        <field name="description" type="text-long"/>
        <field name="storyLocation" type="text-medium"/>
        <field name="priority" type="number-integer"/>
        <field name="requestDate" type="date-time"/>
        <field name="responseRequiredDate" type="date-time"/>
        <field name="requestResolutionEnumId" type="id"/>
        <field name="facilityId" type="id"/>
        <field name="productStoreId" type="id"/>
        <field name="salesChannelEnumId" type="id"/>
        <field name="fulfillContactMechId" type="id"><description>Where to send the results of the request.</description></field>
        <field name="maximumAmountUomId" type="id"/>
        <field name="currencyUomId" type="id"/>
        <field name="filedByPartyId" type="id"/>

        <relationship type="one" title="RequestType" related-entity-name="moqui.basic.Enumeration">
            <key-map field-name="requestTypeEnumId"/></relationship>
        <relationship type="one" related-entity-name="mantle.request.RequestCategory"/>
        <relationship type="one" title="Request" related-entity-name="moqui.basic.StatusItem"/>
        <relationship type="one" title="RequestResolution" related-entity-name="moqui.basic.Enumeration">
            <key-map field-name="requestResolutionEnumId"/></relationship>
        <relationship type="one" related-entity-name="mantle.product.store.ProductStore"/>
        <relationship type="one" related-entity-name="mantle.facility.Facility"/>
        <relationship type="one" title="SalesChannel" related-entity-name="moqui.basic.Enumeration">
            <key-map field-name="salesChannelEnumId"/></relationship>
        <relationship type="one" title="Fulfill" related-entity-name="mantle.party.contact.ContactMech">
            <key-map field-name="fulfillContactMechId"/></relationship>
        <relationship type="one" title="MaximumAmount" related-entity-name="moqui.basic.Uom">
            <key-map field-name="maximumAmountUomId"/></relationship>
        <relationship type="one" title="Currency" related-entity-name="moqui.basic.Uom">
            <key-map field-name="currencyUomId"/></relationship>
        <relationship type="one" title="FiledBy" related-entity-name="mantle.party.Party">
            <key-map field-name="filedByPartyId"/></relationship>

        <seed-data>
            <!-- Request Type -->
            <moqui.basic.EnumerationType description="Request Type" enumTypeId="RequestType"/>
            <moqui.basic.Enumeration enumId="RqtBugFix" description="Bug Fix" enumTypeId="RequestType"/>
            <moqui.basic.Enumeration enumId="RqtNewFeature" description="New Feature" enumTypeId="RequestType"/>
            <moqui.basic.Enumeration enumId="RqtInformation" description="Information" enumTypeId="RequestType"/>
            <moqui.basic.Enumeration enumId="RqtProposal" description="Proposal" enumTypeId="RequestType"/>
            <moqui.basic.Enumeration enumId="RqtQuote" description="Quote" enumTypeId="RequestType"/>
            <moqui.basic.Enumeration enumId="RqtSupport" description="Support" enumTypeId="RequestType"/>
            <moqui.basic.Enumeration enumId="RqtInventory" description="Inventory" enumTypeId="RequestType"/>
            <moqui.basic.Enumeration enumId="RqtPurchase" description="Purchase" enumTypeId="RequestType"/>

            <!-- Request Status -->
            <moqui.basic.StatusType description="Request Status" statusTypeId="Request"/>
            <moqui.basic.StatusItem description="Draft" sequenceNum="0" statusId="ReqDraft" statusTypeId="Request"/>
            <moqui.basic.StatusItem description="Submitted" sequenceNum="1" statusId="ReqSubmitted" statusTypeId="Request"/>
            <moqui.basic.StatusItem description="Reviewed" sequenceNum="3" statusId="ReqReviewed" statusTypeId="Request"/>
            <moqui.basic.StatusItem description="In Progress" sequenceNum="4" statusId="ReqInProgress" statusTypeId="Request"/>
            <moqui.basic.StatusItem description="Completed" sequenceNum="5" statusId="ReqCompleted" statusTypeId="Request"/>
            <moqui.basic.StatusItem description="Cancelled" sequenceNum="99" statusId="ReqCancelled" statusTypeId="Request"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="ReqDraft" toStatusId="ReqSubmitted" transitionName="Submit"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="ReqDraft" toStatusId="ReqCancelled" transitionName="Cancel"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="ReqSubmitted" toStatusId="ReqCompleted" transitionName="Complete"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="ReqSubmitted" toStatusId="ReqReviewed" transitionName="Reviewed"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="ReqSubmitted" toStatusId="ReqInProgress" transitionName="Start Progress"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="ReqSubmitted" toStatusId="ReqCancelled" transitionName="Cancel"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="ReqReviewed" toStatusId="ReqCompleted" transitionName="Complete"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="ReqReviewed" toStatusId="ReqInProgress" transitionName="Start Progress"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="ReqReviewed" toStatusId="ReqCancelled" transitionName="Cancel"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="ReqInProgress" toStatusId="ReqSubmitted" transitionName="Stop Progress (to Submitted)"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="ReqInProgress" toStatusId="ReqCompleted" transitionName="Complete"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="ReqInProgress" toStatusId="ReqCancelled" transitionName="Cancel"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="ReqCompleted" toStatusId="ReqInProgress" transitionName="Re-open"/>

            <!-- Request Resolution -->
            <moqui.basic.EnumerationType description="Request Resolution" enumTypeId="RequestResolution"/>
            <moqui.basic.Enumeration enumId="RrFixed" description="Fixed" enumTypeId="RequestResolution"/>
            <moqui.basic.Enumeration enumId="RrCantReproduce" description="Can't Reproduce" enumTypeId="RequestResolution"/>
            <moqui.basic.Enumeration enumId="RrWontFix" description="Won't Fix" enumTypeId="RequestResolution"/>
            <moqui.basic.Enumeration enumId="RrDuplicate" description="Duplicate" enumTypeId="RequestResolution"/>
            <moqui.basic.Enumeration enumId="RrRejected" description="Rejected" enumTypeId="RequestResolution"/>
            <moqui.basic.Enumeration enumId="RrInsufficient" description="Insufficient Information" enumTypeId="RequestResolution"/>
            <moqui.basic.Enumeration enumId="RrCompleted" description="Completed" enumTypeId="RequestResolution"/>
            <moqui.basic.Enumeration enumId="RrUnresolved" description="Unresolved" enumTypeId="RequestResolution"/>
        </seed-data>
    </entity>
    <entity entity-name="RequestCategory" package-name="mantle.request">
        <field name="requestCategoryId" type="id" is-pk="true"/>
        <field name="parentCategoryId" type="id"/>
        <field name="responsiblePartyId" type="id">
            <description>Party (person or group) responsible for Requests in this Category.</description>
        </field>
        <field name="description" type="text-medium"/>
        <relationship type="one" title="Parent" related-entity-name="mantle.request.RequestCategory">
            <key-map field-name="parentCategoryId" related-field-name="requestCategoryId"/></relationship>
        <relationship type="one" title="Responsible" related-entity-name="Party">
            <key-map field-name="responsiblePartyId"/></relationship>
    </entity>
    <entity entity-name="RequestCommEvent" package-name="mantle.request">
        <field name="requestId" type="id" is-pk="true"/>
        <field name="communicationEventId" type="id" is-pk="true"/>
        <relationship type="one" related-entity-name="mantle.request.Request"/>
        <relationship type="one" related-entity-name="CommunicationEvent"/>
    </entity>
    <entity entity-name="RequestContent" package-name="mantle.request">
        <field name="requestId" type="id" is-pk="true"/>
        <field name="contentLocation" type="text-medium" is-pk="true"/>
        <field name="requestContentTypeEnumId" type="id" is-pk="true"/>
        <field name="fromDate" type="date-time" is-pk="true"/>
        <field name="thruDate" type="date-time"/>
        <relationship type="one" related-entity-name="mantle.request.Request"/>
        <relationship type="one" title="RequestContentType" related-entity-name="moqui.basic.Enumeration">
            <key-map field-name="requestContentTypeEnumId"/></relationship>
        <seed-data>
            <!-- Facility Content Type -->
            <moqui.basic.EnumerationType description="Request Content Type" enumTypeId="RequestContentType"/>
            <moqui.basic.Enumeration description="Internal Content" enumId="RqCntInternal" enumTypeId="RequestContentType"/>
            <moqui.basic.Enumeration description="User Defined Content"  enumId="RqCntUserDefined" enumTypeId="RequestContentType"/>
            <moqui.basic.Enumeration description="Image URL"  enumId="RqCntImageUrl" enumTypeId="RequestContentType"/>
        </seed-data>
    </entity>
    <entity entity-name="RequestItem" package-name="mantle.request">
        <field name="requestId" type="id" is-pk="true"/>
        <field name="requestItemSeqId" type="id" is-pk="true"/>
        <field name="statusId" type="id" enable-audit-log="true"/>
        <field name="requiredByDate" type="date-time"/>
        <field name="productId" type="id"/>
        <field name="quantity" type="number-decimal"/>
        <field name="selectedAmount" type="number-decimal"><description>When Product.amountRequire=Y the amount goes here to supplement the quantity.</description></field>
        <field name="maximumAmount" type="currency-amount"><description>The maximum amount (price) to pay for the item.</description></field>
        <field name="description" type="text-medium"/>
        <field name="supplierPartyId" type="id"/>

        <relationship type="one" related-entity-name="mantle.request.Request"/>
        <relationship type="one" title="Request" related-entity-name="moqui.basic.StatusItem"/>
        <relationship type="one" related-entity-name="mantle.product.Product"/>
        <relationship type="one" title="Supplier" related-entity-name="mantle.party.Party">
            <key-map field-name="supplierPartyId"/></relationship>
    </entity>
    <entity entity-name="RequestItemAssoc" package-name="mantle.request">
        <field name="requestId" type="id" is-pk="true"/>
        <field name="requestItemSeqId" type="id" is-pk="true"/>
        <field name="otherRequestId" type="id" is-pk="true"/>
        <field name="otherRequestItemSeqId" type="id" is-pk="true"/>
        <field name="quantity" type="number-decimal"/>
        <relationship type="one" related-entity-name="mantle.request.RequestItem"/>
        <relationship type="one" title="Other" related-entity-name="mantle.request.RequestItem">
            <key-map field-name="otherRequestId" related-field-name="requestId"/>
            <key-map field-name="otherRequestItemSeqId" related-field-name="requestItemSeqId"/>
        </relationship>
    </entity>
    <entity entity-name="RequestItemOrder" package-name="mantle.request">
        <field name="requestItemOrderId" type="id" is-pk="true"/>
        <field name="requestId" type="id"/>
        <field name="requestItemSeqId" type="id"/>
        <field name="orderId" type="id"/>
        <field name="orderItemSeqId" type="id"/>
        <field name="quantity" type="number-decimal"/>
        <relationship type="one" related-entity-name="mantle.request.RequestItem">
            <key-map field-name="requestId"/>
            <key-map field-name="requestItemSeqId"/>
        </relationship>
        <relationship type="one" related-entity-name="mantle.order.OrderItem">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </relationship>
    </entity>
    <entity entity-name="RequestNote" package-name="mantle.request">
        <field name="requestId" type="id" is-pk="true"/>
        <field name="noteDate" type="date-time" is-pk="true"/>
        <field name="requestItemSeqId" type="id"/>
        <field name="noteText" type="text-very-long"/>
        <relationship type="one" related-entity-name="mantle.request.Request"/>
        <relationship type="one-nofk" related-entity-name="mantle.request.RequestItem">
            <key-map field-name="requestId"/>
            <key-map field-name="requestItemSeqId"/>
        </relationship>
    </entity>
    <entity entity-name="RequestParty" package-name="mantle.request">
        <field name="requestId" type="id" is-pk="true"/>
        <field name="partyId" type="id" is-pk="true"/>
        <field name="roleTypeId" type="id" is-pk="true"/>
        <field name="fromDate" type="date-time" is-pk="true"/>
        <field name="thruDate" type="date-time"/>
        <field name="receiveNotifications" type="text-indicator"/>
        <relationship type="one" related-entity-name="mantle.request.Request"/>
        <relationship type="one" related-entity-name="mantle.party.Party"/>
        <relationship type="one" related-entity-name="mantle.party.RoleType"/>
        <relationship type="one-nofk" related-entity-name="mantle.party.Person"/>
        <relationship type="one-nofk" related-entity-name="mantle.party.Organization"/>
        <seed-data>
            <moqui.basic.Enumeration description="Request" enumId="RgpRequest" enumTypeId="RoleGroup"/>
            <mantle.party.RoleGroupMember  roleGroupEnumId="RgpRequest" roleTypeId="Assignee"/>
            <mantle.party.RoleGroupMember  roleGroupEnumId="RgpRequest" roleTypeId="Manager"/>
            <mantle.party.RoleGroupMember  roleGroupEnumId="RgpRequest" roleTypeId="Reporter"/>
            <mantle.party.RoleGroupMember  roleGroupEnumId="RgpRequest" roleTypeId="Watcher"/>
            <mantle.party.RoleGroupMember  roleGroupEnumId="RgpRequest" roleTypeId="CustomerBillTo"/>
        </seed-data>
    </entity>
    <entity entity-name="RequestWorkEffort" package-name="mantle.request">
        <field name="requestId" type="id" is-pk="true"/>
        <field name="workEffortId" type="id" is-pk="true"/>
        <relationship type="one" related-entity-name="mantle.request.Request"/>
        <relationship type="one" related-entity-name="mantle.work.effort.WorkEffort"/>
    </entity>

    <!-- ========================================================= -->
    <!-- mantle.request.requirement -->
    <!-- ========================================================= -->

    <entity entity-name="Requirement" package-name="mantle.request.requirement">
        <field name="requirementId" type="id" is-pk="true"/>
        <field name="requirementTypeEnumId" type="id"/>
        <field name="statusId" type="id" enable-audit-log="true"/>
        <field name="facilityId" type="id"/>
        <field name="deliverableId" type="id"/>
        <field name="assetId" type="id"/>
        <field name="productId" type="id"/>
        <field name="description" type="text-medium"/>
        <field name="requirementStartDate" type="date-time"/>
        <field name="requiredByDate" type="date-time"/>
        <field name="estimatedBudget" type="currency-amount"/>
        <field name="quantity" type="number-decimal"/>
        <field name="useCase" type="text-very-long"/>
        <field name="reason" type="text-long"/>
        <relationship type="one" title="RequirementType" related-entity-name="moqui.basic.Enumeration">
            <key-map field-name="requirementTypeEnumId"/></relationship>
        <relationship type="one" title="Requirement" related-entity-name="moqui.basic.StatusItem"/>
        <relationship type="one" related-entity-name="mantle.facility.Facility"/>
        <relationship type="one" related-entity-name="mantle.work.effort.Deliverable"/>
        <relationship type="one" related-entity-name="mantle.product.asset.Asset"/>
        <relationship type="one" related-entity-name="mantle.product.Product"/>

        <seed-data>
            <!-- Requirement Type -->
            <moqui.basic.EnumerationType description="Requirement Type" enumTypeId="RequirementType"/>
            <moqui.basic.Enumeration description="Customer" enumId="RqTpCustomer" enumTypeId="RequirementType"/>
            <moqui.basic.Enumeration description="Internal" enumId="RqTpInternal" enumTypeId="RequirementType"/>
            <moqui.basic.Enumeration description="Product" enumId="RqTpProduct" enumTypeId="RequirementType"/>
            <moqui.basic.Enumeration description="Inventory" enumId="RqTpInventory" enumTypeId="RequirementType"/>
            <moqui.basic.Enumeration description="Work" enumId="RqTpWork" enumTypeId="RequirementType"/>

            <!-- Requirement Status -->
            <moqui.basic.StatusType description="Requirement Status" statusTypeId="Requirement"/>
            <moqui.basic.StatusItem description="Proposed" sequenceNum="1" statusId="RqmtStProposed" statusTypeId="Requirement"/>
            <moqui.basic.StatusItem description="Created" sequenceNum="2" statusId="RqmtStCreated" statusTypeId="Requirement"/>
            <moqui.basic.StatusItem description="Approved" sequenceNum="3" statusId="RqmtStApproved" statusTypeId="Requirement"/>
            <moqui.basic.StatusItem description="Ordered" sequenceNum="4" statusId="RqmtStOrdered" statusTypeId="Requirement"/>
            <moqui.basic.StatusItem description="Rejected" sequenceNum="9" statusId="RqmtStRejected" statusTypeId="Requirement"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="RqmtStProposed" toStatusId="RqmtStApproved" transitionName="Accept"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="RqmtStProposed" toStatusId="RqmtStRejected" transitionName="Reject"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="RqmtStCreated" toStatusId="RqmtStApproved" transitionName="Accept"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="RqmtStCreated" toStatusId="RqmtStRejected" transitionName="Reject"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="RqmtStApproved" toStatusId="RqmtStOrdered" transitionName="Order"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="RqmtStApproved" toStatusId="RqmtStRejected" transitionName="Reject"/>
        </seed-data>
    </entity>
    <entity entity-name="RequirementBudgetAllocation" package-name="mantle.request.requirement">
        <field name="requirementId" type="id" is-pk="true"/>
        <field name="budgetId" type="id" is-pk="true"/>
        <field name="budgetItemSeqId" type="id" is-pk="true"/>
        <field name="amount" type="currency-amount"/>
        <relationship type="one" related-entity-name="BudgetItem">
            <key-map field-name="budgetId"/>
            <key-map field-name="budgetItemSeqId"/>
        </relationship>
        <relationship type="one" related-entity-name="mantle.request.requirement.Requirement"/>
    </entity>
    <entity entity-name="RequirementRequestItem" package-name="mantle.request.requirement">
        <field name="requirementId" type="id" is-pk="true"/>
        <field name="requestId" type="id" is-pk="true"/>
        <field name="requestItemSeqId" type="id" is-pk="true"/>
        <relationship type="one" related-entity-name="mantle.request.requirement.Requirement"/>
        <relationship type="one" related-entity-name="mantle.request.RequestItem">
            <key-map field-name="requestId"/>
            <key-map field-name="requestItemSeqId"/>
        </relationship>
    </entity>
    <entity entity-name="RequirementParty" package-name="mantle.request.requirement">
        <field name="requirementId" type="id" is-pk="true"/>
        <field name="partyId" type="id" is-pk="true"/>
        <field name="roleTypeId" type="id" is-pk="true"/>
        <field name="fromDate" type="date-time" is-pk="true"/>
        <field name="thruDate" type="date-time"/>
        <relationship type="one" related-entity-name="mantle.request.requirement.Requirement"/>
        <relationship type="one" related-entity-name="mantle.party.Party"/>
        <relationship type="one" related-entity-name="mantle.party.RoleType"/>
    </entity>
    <entity entity-name="RequirementOrderItem" package-name="mantle.request.requirement">
        <field name="requirementId" type="id" is-pk="true"/>
        <field name="orderId" type="id" is-pk="true"/>
        <field name="orderItemSeqId" type="id" is-pk="true"/>
        <field name="quantity" type="number-decimal"/>
        <relationship type="one" related-entity-name="mantle.order.OrderItem">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </relationship>
        <relationship type="one" related-entity-name="mantle.request.requirement.Requirement"/>
    </entity>
    <entity entity-name="WorkRequirementFulfillment" package-name="mantle.request.requirement">
        <field name="requirementId" type="id" is-pk="true"/>
        <field name="workEffortId" type="id" is-pk="true"/>
        <field name="fulfillmentTypeEnumId" type="id"/>
        <relationship type="one" related-entity-name="mantle.request.requirement.Requirement"/>
        <relationship type="one" related-entity-name="mantle.work.effort.WorkEffort"/>
        <relationship type="one" title="WorkRequirementFulfillmentType" related-entity-name="moqui.basic.Enumeration">
            <key-map field-name="fulfillmentTypeEnumId"/></relationship>

        <seed-data>
            <!-- Work Requirement Fulfillment Type -->
            <moqui.basic.EnumerationType description="Work Requirement Fulfillment Type" enumTypeId="WorkRequirementFulfillmentType"/>
            <moqui.basic.Enumeration description="Implements" enumId="WrfImplements" enumTypeId="WorkRequirementFulfillmentType"/>
            <moqui.basic.Enumeration description="Fixes" enumId="WrfFixes" enumTypeId="WorkRequirementFulfillmentType"/>
            <moqui.basic.Enumeration description="Deploys" enumId="WrfDeploys" enumTypeId="WorkRequirementFulfillmentType"/>
            <moqui.basic.Enumeration description="Tests" enumId="WrfTests" enumTypeId="WorkRequirementFulfillmentType"/>
            <moqui.basic.Enumeration description="Delivers" enumId="WrfDelivers" enumTypeId="WorkRequirementFulfillmentType"/>
        </seed-data>
    </entity>
</entities>
